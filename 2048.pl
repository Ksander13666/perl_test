#!/usr/bin/perl
# use strict;

my $x11=0; #переменные по координатам
my $x12=0;
my $x13=0;
my $x14=0;
my $x21=0;
my $x22=0;
my $x23=0;
my $x24=0;
my $x31=0;
my $x32=0;
my $x33=0;
my $x34=0;
my $x41=0;
my $x42=0;
my $x43=0;
my $x44=0;
my $mov;
my $MOV;

sub wasd { #ввод с клавиатуры
	my $key=<STDIN>;
	chomp $key;
	$mov = substr($key, 0, 1);
	$MOV =uc($mov); #клавиша ввода
	# print "$MOV\n";
}


#создаем начальную расстановку
my $a=1;
M1:
while ($a<3) {
	my $xrand = int rand(4) +1;
	my $yrand = int rand(4) +1;
	if ($a==1){
		my $one = "$xrand$yrand";
		if ($one==11) {
			$x11=2;
		} elsif ($one==12) {
			$x12=2;
		} elsif ($one==13) {
			$x13=2;
		} elsif ($one==14) {
			$x14=2;
		} elsif ($one==21) {
			$x21=2;
		} elsif ($one==22) {
			$x22=2;
		} elsif ($one==23) {
			$x23=2;
		} elsif ($one==24) {
			$x24=2;
		} elsif ($one==31) {
			$x31=2;
		} elsif ($one==32) {
			$x32=2
		} elsif ($one==33) {
			$x33=2;
		} elsif ($one==34) {
			$x34=2;
		} elsif ($one==41) {
			$x41=2;
		} elsif ($one==42) {
			$x42=2;
		} elsif ($one==43) {
			$x43=2;
		} elsif ($one==44) {
			$x44=2;
		}	
		#print "$one\n";
		} else {
			my $two = "$xrand$yrand";
			my $tworand = (int rand(2) + 1)*2;
		if ($two==11) {
			$x11=$tworand;
		} elsif ($two==12) {
			$x12=$tworand;
		} elsif ($two==13) {
			$x13=$tworand;
		} elsif ($two==14) {
			$x14=$tworand;
		} elsif ($two==21) {
			$x21=$tworand;
		} elsif ($two==22) {
			$x22=$tworand;
		} elsif ($two==23) {
			$x23=$tworand;
		} elsif ($two==24) {
			$x24=$tworand;
		} elsif ($two==31) {
			$x31=$tworand;
		} elsif ($two==32) {
			$x32=$tworand;
		} elsif ($two==33) {
			$x33=$tworand;
		} elsif ($two==34) {
			$x34=$tworand;
		} elsif ($two==41) {
			$x41=$tworand;
		} elsif ($two==42) {
			$x42=$tworand;
		} elsif ($two==43) {
			$x43=$tworand;
		} elsif ($two==44) {
			$x44=$tworand;
		}
			# print "$two\n$tworand\n";
		}
	++$a;
}
#отрисовываем первоначальное поле
system(clear);
print "$x11 $x12 $x13 $x14\n$x21 $x22 $x23 $x24\n$x31 $x32 $x33 $x34\n$x41 $x42 $x43 $x44\n";
print "use key WASD\nUse Q to exit\n";
#основной цикл игры
my $play;
while ($play < 42) {
&wasd;
if ("$MOV" eq "W") { #движение вверх
	if ("$x11" == 0 ) {  #первый столбец 
		$x11 = "$x21";
		if ("$x11" == 0) {
			$x11 = "$x31";
			if ("$x11" == 0) { 
				$x11 = "$x41";
				$x21 = 0;
				$x31 = 0;
				$x41 = 0;
			} elsif ("$x11" == "$x41") {
				$x11 ="$x11"+"$x41";
				$x21 = 0;
				$x31 = 0;
				$x41 = 0;
			} else { 
				$x21 = "$x41";
				$x31 = 0;
				$x41 = 0;
			}
		} elsif ("$x11" == "$x31") {
			$x11 = "$x11"+"$x31";
			$x21 = "$x41";
			$x31 = 0;
			$x41 = 0;
		} elsif ("$x11" == "$x41" && "$x31" == 0 ) {
			$x11="$x11"+"$x41";
			$x21 = 0;
			$x31 = 0;
			$x41 = 0;
		} else {
			$x21="$x31";
			if ("$x21" == "$x41") {
				$x21 = "$x21"+"$x41";
				if ("$x11"=="$x21") {
					$x11 ="$x11"+"$x21";
					$x21 = 0;
					$x31 = 0;
					$x41 = 0;
				} else {
					$x31 = 0;
					$x41 = 0;
				}
			} else {
				$x31 = "$x41";
				$x41 = 0;
			}
		}
	} elsif ("$x11" == "$x21") {
		$x11 = "$x11"+"$x21";
		$x21 = "$x31";
		if ("$x21" ==  0) {
			$x21 = "$x41";
			$x31=0;
			$x41=0;
		} elsif ("$x21" == "$x41") {
		 $x21 = "$x21"+"$x41";
		 $x31=0;
		 $x41=0;
		 } else {
		 $x31 = "$x41";
		 $x41=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x21" == 0 ) {
	 		if ("$x11" == "$x31") {
	 			$x11 = "$x11"+"$x31";
	 			$x21 = "$x41";
	 			$x31=0;
				$x41=0;
	 		} else {
			$x21 = "$x31";
			if ("$x21" ==  0 ) {
				$x21 = "$x41";
				$x31=0;
				$x41=0;
			} elsif ("$x21" ==  "$x41" && "$x31" == 0 ) {
				$x21 = "$x21" + "$x41";
				$x31=0;
				$x41=0;
			} else {
				$x31 = "$x41";
				$x41=0;
			}
		}
	 	} elsif ("$x21" == "$x31") {
			$x21 = "$x21" + "$x31";
			$x31 = "$x41";
			$x41 = 0;
		} else {
			if ("$x31" == 0 ) {
			$x31 = "$x41";
			$x41=0;
			} elsif ("$x31" == "$x41") {
				$x31 ="$x31" + "$x41";
				$x41=0;
				}
			}
	
	 }
	 
	if ("$x12" == 0 ) {  #второй столбец
		$x12 = "$x22";
		if ("$x12" == 0) {
			$x12 = "$x32";
			if ("$x12" == 0) { 
				$x12 = "$x42";
				$x22 = 0;
				$x32 = 0;
				$x42 = 0;
			} elsif ("$x12" == "$x42") {
				$x12 ="$x12"+"$x42";
				$x22 = 0;
				$x32 = 0;
				$x42 = 0;
			} else { 
				$x22 = "$x42";
				$x32 = 0;
				$x42 = 0;
			}
		} elsif ("$x12" == "$x32") {
			$x12 = "$x12"+"$x32";
			$x22 = "$x42";
			$x32 = 0;
			$x42 = 0;
		} elsif ("$x12" == "$x42" && "$x32" == 0 ) {
			$x12="$x12"+"$x42";
			$x22 = 0;
			$x32 = 0;
			$x42 = 0;
		} else {
			$x22="$x32";
			if ("$x22" == "$x42") {
				$x22 = "$x22"+"$x42";
				if ("$x12"=="$x22") {
					$x12 ="$x12"+"$x22";
					$x22 = 0;
					$x32 = 0;
					$x42 = 0;
				} else {
					$x32 = 0;
					$x42 = 0;
				}
			} else {
				$x32 = "$x42";
				$x42 = 0;
			}
		}
	} elsif ("$x12" == "$x22") {
		$x12 = "$x12"+"$x22";
		$x22 = "$x32";
		if ("$x22" ==  0) {
			$x22 = "$x42";
			$x32=0;
			$x42=0;
		} elsif ("$x22" == "$x42") {
		 $x22 = "$x22"+"$x42";
		 $x32=0;
		 $x42=0;
		 } else {
		 $x32 = "$x42";
		 $x42=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x22" == 0 ) {
	 		if ("$x12" == "$x32") {
	 			$x12 = "$x12"+"$x32";
	 			$x22 = "$x42";
	 			$x32=0;
				$x42=0;
	 		} else {
			$x22 = "$x32";
			if ("$x22" ==  0 ) {
				$x22 = "$x42";
				$x32=0;
				$x42=0;
			} elsif ("$x22" ==  "$x42" && "$x32" == 0 ) {
				$x22 = "$x22" + "$x42";
				$x32=0;
				$x42=0;
			} else {
				$x32 = "$x42";
				$x42=0;
			}
			}
	 	} elsif ("$x22" == "$x32") {
			$x22 = "$x22" + "$x32";
			$x32 = "$x42";
			$x42 = 0;
		} else {
			if ("$x32" == 0 ) {
			$x31 = "$x42";
			$x42=0;
			} elsif ("$x32" == "$x42") {
				$x32 ="$x32" + "$x42";
				$x42=0;
				}
			}
	
	 }
 
	if ("$x13" == 0 ) {  #третий столбец
		$x13 = "$x23";
		if ("$x13" == 0) {
			$x13 = "$x33";
			if ("$x13" == 0) { 
				$x13 = "$x43";
				$x23 = 0;
				$x33 = 0;
				$x43 = 0;
			} elsif ("$x13" == "$x43") {
				$x13 ="$x13"+"$x43";
				$x23 = 0;
				$x33 = 0;
				$x43 = 0;
			} else { 
				$x23 = "$x43";
				$x33 = 0;
				$x43 = 0;
			}
		} elsif ("$x13" == "$x33") {
			$x13 = "$x13"+"$x33";
			$x23 = "$x43";
			$x33 = 0;
			$x43 = 0;
		} elsif ("$x13" == "$x43" && "$x33" == 0 ) {
			$x13="$x13"+"$x43";
			$x23 = 0;
			$x33 = 0;
			$x43 = 0;
		} else {
			$x23="$x33";
			if ("$x23" == "$x43") {
				$x23 = "$x23"+"$x43";
				if ("$x13"=="$x23") {
					$x13 ="$x13"+"$x23";
					$x23 = 0;
					$x33 = 0;
					$x43 = 0;
				} else {
					$x33 = 0;
					$x43 = 0;
				}
			} else {
				$x33 = "$x43";
				$x43 = 0;
			}
		}
	} elsif ("$x13" == "$x23") {
		$x13 = "$x13"+"$x23";
		$x23 = "$x33";
		if ("$x23" ==  0) {
			$x23 = "$x43";
			$x33=0;
			$x43=0;
		} elsif ("$x23" == "$x43") {
		 $x23 = "$x23"+"$x43";
		 $x33=0;
		 $x43=0;
		 } else {
		 $x33 = "$x43";
		 $x43=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x23" == 0 ) {
	 		if ("$x13" == "$x33") {
	 			$x13 = "$x13"+"$x33";
	 			$x23 = "$x43";
	 			$x33=0;
				$x43=0;
	 		} else {
			$x23 = "$x33";
			if ("$x23" ==  0 ) {
				$x23 = "$x43";
				$x33=0;
				$x43=0;
			} elsif ("$x23" ==  "$x43" && "$x33" == 0 ) {
				$x23 = "$x23" + "$x43";
				$x33=0;
				$x43=0;
			} else {
				$x33 = "$x43";
				$x43=0;
			}
			}
	 	} elsif ("$x23" == "$x33") {
			$x23 = "$x23" + "$x33";
			$x33 = "$x43";
			$x43 = 0;
		} else {
			if ("$x33" == 0 ) {
			$x33 = "$x43";
			$x43=0;
			} elsif ("$x33" == "$x43") {
				$x33 ="$x33" + "$x43";
				$x43=0;
				}
			}
	
	 }
 
	if ("$x14" == 0 ) {  #четвертый столбец
		$x14 = "$x24";
		if ("$x14" == 0) {
			$x14 = "$x34";
			if ("$x14" == 0) { 
				$x14 = "$x44";
				$x24 = 0;
				$x34 = 0;
				$x44 = 0;
			} elsif ("$x14" == "$x44") {
				$x14 ="$x14"+"$x44";
				$x24 = 0;
				$x34 = 0;
				$x44 = 0;
			} else { 
				$x24 = "$x44";
				$x34 = 0;
				$x44 = 0;
			}
		} elsif ("$x14" == "$x34") {
			$x14 = "$x14"+"$x34";
			$x24 = "$x44";
			$x34 = 0;
			$x44 = 0;
		} elsif ("$x14" == "$x44" && "$x34" == 0 ) {
			$x14="$x14"+"$x44";
			$x24 = 0;
			$x34 = 0;
			$x44 = 0;
		} else {
			$x24="$x34";
			if ("$x24" == "$x44") {
				$x24 = "$x24"+"$x44";
				if ("$x14"=="$x24") {
					$x14 ="$x14"+"$x24";
					$x24 = 0;
					$x34 = 0;
					$x44 = 0;
				} else {
					$x34 = 0;
					$x44 = 0;
				}
			} else {
				$x34 = "$x44";
				$x44 = 0;
			}
		}
	} elsif ("$x14" == "$x24") {
		$x14 = "$x14"+"$x24";
		$x24 = "$x34";
		if ("$x24" ==  0) {
			$x24 = "$x44";
			$x34=0;
			$x44=0;
		} elsif  ("$x24" == "$x44") {
		 $x24 = "$x24"+"$x44";
		 $x34=0;
		 $x44=0;
		 } else {
		 $x34 = "$x44";
		 $x44=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x24" == 0 ) {
	 		if ("$x14" == "$x34") {
	 			$x14 = "$x14"+"$x34";
	 			$x24 = "$x44";
	 			$x34=0;
				$x44=0;
	 		} else {
			$x24 = "$x34";
			if ("$x24" ==  0 ) {
				$x24 = "$x44";
				$x34=0;
				$x44=0;
			} elsif ("$x24" ==  "$x44" && "$x34" == 0 ) {
				$x24 = "$x24" + "$x44";
				$x34=0;
				$x44=0;
			} else {
				$x34 = "$x44";
				$x44=0;
			}
			}
	 	} elsif ("$x24" == "$x34") {
			$x24 = "$x24" + "$x34";
			$x34 = "$x44";
			$x44 = 0;
		} else {
			if ("$x34" == 0 ) {
			$x34 = "$x44";
			$x44=0;
			} elsif ("$x34" == "$x44") {
				$x34 ="$x34" + "$x44";
				$x44=0;
				}
			}
	
	 }
} elsif ("$MOV" eq "Q") { #выход из цикла
	exit;
} elsif ("$MOV" eq "S") { #движение вниз
	if ("$x41" == 0 ) {  #первый столбец 
		$x41 = "$x31";
		if ("$x41" == 0) {
			$x41 = "$x21";
			if ("$x41" == 0) { 
				$x41 = "$x11";
				$x21 = 0;
				$x31 = 0;
				$x11 = 0;
			} elsif ("$x41" == "$x11") {
				$x41 ="$x11"+"$x41";
				$x21 = 0;
				$x31 = 0;
				$x11 = 0;
			} else { 
				$x31 = "$x11";
				$x21 = 0;
				$x11 = 0;
			}
		} elsif ("$x41" == "$x21") {
			$x41 = "$x41"+"$x21";
			$x31 = "$x11";
			$x21 = 0;
			$x11 = 0;
		} elsif ("$x41" == "$x11" && "$x21" == 0 ) {
			$x41="$x11"+"$x41";
			$x21 = 0;
			$x31 = 0;
			$x11 = 0;
		} else {
			$x31="$x21";
			if ("$x31" == "$x11") {
				$x31 = "$x31"+"$x11";
				if ("$x41"=="$x31") {
					$x41 ="$x41"+"$x31";
					$x21 = 0;
					$x31 = 0;
					$x11 = 0;
				} else {
					$x21 = 0;
					$x11 = 0;
				}
			} else {
				$x21 = "$x11";
				$x11 = 0;
			}
		}
	} elsif ("$x41" == "$x31") {
		$x41 = "$x41"+"$x31";
		$x31 = "$x21";
		if ("$x31" ==  0) {
			$x31 = "$x11";
			$x21=0;
			$x11=0;
		} elsif ("$x31" == "$x11") {
		 $x31 = "$x31"+"$x11";
		 $x21=0;
		 $x11=0;
		 } else {
		 $x21 = "$x11";
		 $x11=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x31" == 0 ) {
	 		if ("$x41" == "$x21") {
	 			$x41 = "$x41"+"$x21";
	 			$x31 = "$x11";
	 			$x21=0;
				$x11=0;
	 		} else {
			$x31 = "$x21";
			if ("$x31" ==  0 ) {
				$x31 = "$x11";
				$x21=0;
				$x11=0;
			} elsif ("$x31" ==  "$x11" && "$x21" == 0 ) {
				$x31 = "$x31" + "$x11";
				$x21=0;
				$x11=0;
			} else {
				$x21 = "$x11";
				$x11=0;
			}
			}
	 	} elsif ("$x31" == "$x21") {
			$x31 = "$x21" + "$x31";
			$x21 = "$x11";
			$x11 = 0;
		} else {
			if ("$x21" == 0 ) {
			$x21 = "$x11";
			$x11=0;
			} elsif ("$x21" == "$x11") {
				$x21 ="$x21" + "$x11";
				$x11=0;
				}
			}
	
	 }
	 if ("$x42" == 0 ) {  #второй столбец 
		$x42 = "$x32";
		if ("$x42" == 0) {
			$x42 = "$x22";
			if ("$x42" == 0) { 
				$x42 = "$x12";
				$x22 = 0;
				$x32 = 0;
				$x12 = 0;
			} elsif ("$x42" == "$x12") {
				$x42 ="$x12"+"$x42";
				$x22 = 0;
				$x32 = 0;
				$x12 = 0;
			} else { 
				$x32 = "$x12";
				$x22 = 0;
				$x12 = 0;
			}
		} elsif ("$x42" == "$x22") {
			$x42 = "$x42"+"$x22";
			$x32 = "$x12";
			$x22 = 0;
			$x12 = 0;
		} elsif ("$x42" == "$x12" && "$x22" == 0 ) {
			$x42="$x12"+"$x42";
			$x22 = 0;
			$x32 = 0;
			$x12 = 0;
		} else {
			$x32="$x22";
			if ("$x32" == "$x12") {
				$x32 = "$x32"+"$x12";
				if ("$x42"=="$x32") {
					$x42 ="$x42"+"$x32";
					$x22 = 0;
					$x32 = 0;
					$x12 = 0;
				} else {
					$x22 = 0;
					$x12 = 0;
				}
			} else {
				$x22 = "$x12";
				$x12 = 0;
			}
		}
	} elsif ("$x42" == "$x32") {
		$x42 = "$x42"+"$x32";
		$x32 = "$x22";
		if ("$x32" ==  0) {
			$x32 = "$x12";
			$x22=0;
			$x12=0;
		} elsif ("$x32" == "$x12") {
		 $x32 = "$x32"+"$x12";
		 $x22=0;
		 $x12=0;
		 } else {
		 $x22 = "$x12";
		 $x12=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x32" == 0 ) {
	 		if ("$x42" == "$x22") {
	 			$x42 = "$x42"+"$x22";
	 			$x32 = "$x12";
	 			$x22=0;
				$x12=0;
	 		} else {
			$x32 = "$x22";
			if ("$x32" ==  0 ) {
				$x32 = "$x12";
				$x22=0;
				$x12=0;
			} elsif ("$x32" ==  "$x12" && "$x22" == 0 ) {
				$x32 = "$x32" + "$x12";
				$x22=0;
				$x12=0;
			} else {
				$x22 = "$x12";
				$x12=0;
			}
			}
	 	} elsif ("$x32" == "$x22") {
			$x32 = "$x22" + "$x32";
			$x22 = "$x12";
			$x12 = 0;
		} else {
			if ("$x22" == 0 ) {
			$x22 = "$x12";
			$x12=0;
			} elsif ("$x22" == "$x12") {
				$x22 ="$x22" + "$x12";
				$x12=0;
				}
			}
	
	 }
	if ("$x43" == 0 ) {  #третий столбец 
		$x43 = "$x33";
		if ("$x43" == 0) {
			$x43 = "$x23";
			if ("$x43" == 0) { 
				$x43 = "$x13";
				$x23 = 0;
				$x33 = 0;
				$x13 = 0;
			} elsif ("$x43" == "$x13") {
				$x43 ="$x13"+"$x43";
				$x23 = 0;
				$x33 = 0;
				$x13 = 0;
			} else { 
				$x33 = "$x13";
				$x23 = 0;
				$x13 = 0;
			}
		} elsif ("$x43" == "$x23") {
			$x43 = "$x43"+"$x23";
			$x33 = "$x13";
			$x23 = 0;
			$x13 = 0;
		} elsif ("$x43" == "$x13" && "$x23" == 0 ) {
			$x43="$x13"+"$x43";
			$x23 = 0;
			$x33 = 0;
			$x13 = 0;
		} else {
			$x33="$x23";
			if ("$x33" == "$x13") {
				$x33 = "$x33"+"$x13";
				if ("$x43"=="$x33") {
					$x43 ="$x43"+"$x33";
					$x23 = 0;
					$x33 = 0;
					$x13 = 0;
				} else {
					$x23 = 0;
					$x13 = 0;
				}
			} else {
				$x23 = "$x13";
				$x13 = 0;
			}
		}
	} elsif ("$x43" == "$x33") {
		$x43 = "$x43"+"$x33";
		$x33 = "$x23";
		if ("$x33" ==  0) {
			$x33 = "$x13";
			$x23=0;
			$x13=0;
		} elsif ("$x33" == "$x13") {
		 $x33 = "$x33"+"$x13";
		 $x23=0;
		 $x13=0;
		 } else {
		 $x23 = "$x13";
		 $x13=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x33" == 0 ) {
	 		if ("$x43" == "$x23") {
	 			$x43 = "$x43"+"$x23";
	 			$x33 = "$x13";
	 			$x23=0;
				$x13=0;
	 		} else {
			$x33 = "$x23";
			if ("$x33" ==  0 ) {
				$x33 = "$x13";
				$x23=0;
				$x13=0;
			} elsif ("$x33" ==  "$x13" && "$x23" == 0 ) {
				$x33 = "$x33" + "$x13";
				$x23=0;
				$x13=0;
			} else {
				$x23 = "$x13";
				$x13=0;
			}
			}
	 	} elsif ("$x33" == "$x23") {
			$x33 = "$x23" + "$x33";
			$x23 = "$x13";
			$x13 = 0;
		} else {
			if ("$x23" == 0 ) {
			$x23 = "$x13";
			$x13=0;
			} elsif ("$x23" == "$x13") {
				$x23 ="$x23" + "$x13";
				$x13=0;
				}
			}
	
	 }
	if ("$x44" == 0 ) {  #четвертый столбец 
		$x44 = "$x34";
		if ("$x44" == 0) {
			$x44 = "$x24";
			if ("$x44" == 0) { 
				$x44 = "$x14";
				$x24 = 0;
				$x34 = 0;
				$x14 = 0;
			} elsif ("$x44" == "$x14") {
				$x44 ="$x14"+"$x44";
				$x24 = 0;
				$x34 = 0;
				$x14 = 0;
			} else { 
				$x34 = "$x14";
				$x24 = 0;
				$x14 = 0;
			}
		} elsif ("$x44" == "$x24") {
			$x44 = "$x44"+"$x24";
			$x34 = "$x14";
			$x24 = 0;
			$x14 = 0;
		} elsif ("$x44" == "$x14" && "$x24" == 0 ) {
			$x44="$x14"+"$x44";
			$x24 = 0;
			$x34 = 0;
			$x14 = 0;
		} else {
			$x34="$x24";
			if ("$x34" == "$x14") {
				$x34 = "$x34"+"$x14";
				if ("$x44"=="$x34") {
					$x44 ="$x44"+"$x34";
					$x24 = 0;
					$x34 = 0;
					$x14 = 0;
				} else {
					$x24 = 0;
					$x14 = 0;
				}
			} else {
				$x24 = "$x14";
				$x14 = 0;
			}
		}
	} elsif ("$x44" == "$x34") {
		$x44 = "$x44"+"$x34";
		$x34 = "$x24";
		if ("$x34" ==  0) {
			$x34 = "$x14";
			$x24=0;
			$x14=0;
		} elsif ("$x34" == "$x14") {
		 $x34 = "$x34"+"$x14";
		 $x24=0;
		 $x14=0;
		 } else {
		 $x24 = "$x14";
		 $x14=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x34" == 0 ) {
	 		if ("$x44" == "$x24") {
	 			$x44 = "$x44"+"$x24";
	 			$x34 = "$x14";
	 			$x24=0;
				$x14=0;
	 		} else {
			$x34 = "$x24";
			if ("$x34" ==  0 ) {
				$x34 = "$x14";
				$x24=0;
				$x14=0;
			} elsif ("$x34" ==  "$x14" && "$x24" == 0 ) {
				$x34 = "$x34" + "$x14";
				$x24=0;
				$x14=0;
			} else {
				$x24 = "$x14";
				$x14=0;
			}
			}
	 	} elsif ("$x34" == "$x24") {
			$x34 = "$x24" + "$x34";
			$x24 = "$x14";
			$x14 = 0;
		} else {
			if ("$x24" == 0 ) {
			$x24 = "$x14";
			$x14=0;
			} elsif ("$x24" == "$x14") {
				$x24 ="$x24" + "$x14";
				$x14=0;
				}
			}
	
	 }
} elsif ("$MOV" eq "D") { #движение вправо
	if ("$x14" == 0 ) {  #первая строка 
		$x14 = "$x13";
		if ("$x14" == 0) {
			$x14 = "$x12";
			if ("$x14" == 0) { 
				$x14 = "$x11";
				$x13 = 0;
				$x12 = 0;
				$x11 = 0;
			} elsif ("$x14" == "$x11") {
				$x14 ="$x14"+"$x11";
				$x13 = 0;
				$x12 = 0;
				$x11 = 0;
			} else { #начинать отсюда
				$x13 = "$x11";
				$x12 = 0;
				$x11 = 0;
			}
		} elsif ("$x14" == "$x12") {
			$x14 = "$x14"+"$x12";
			$x13 = "$x11";
			$x12 = 0;
			$x11 = 0;
		} elsif ("$x14" == "$x11" && "$x12" == 0 ) {
			$x14="$x14"+"$x11";
			$x13 = 0;
			$x12 = 0;
			$x11 = 0;
		} else {
			$x13="$x12";
			if ("$x13" == "$x11") {
				$x13 = "$x13"+"$x11";
				if ("$x14"=="$x13") {
					$x14 ="$x14"+"$x13";
					$x13 = 0;
					$x12 = 0;
					$x11 = 0;
				} else {
					$x12 = 0;
					$x11 = 0;
				}
			} else {
				$x12 = "$x11";
				$x11 = 0;
			}
		}
	} elsif ("$x14" == "$x13") {
		$x14 = "$x14"+"$x13";
		$x13 = "$x12";
		if ("$x13" ==  0) {
			$x13 = "$x11";
			$x12=0;
			$x11=0;
		} elsif ("$x13" == "$x11") {
		 $x13 = "$x13"+"$x11";
		 $x12=0;
		 $x11=0;
		 } else {
		 $x12 = "$x11";
		 $x11=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x13" == 0 ) {
	 		if ("$x14" == "$x12") {
	 			$x14 = "$x14"+"$x12";
	 			$x13 = "$x11";
	 			$x12=0;
				$x11=0;
	 		} else {
			$x13 = "$x12";
			if ("$x13" ==  0 ) {
				$x13 = "$x11";
				$x12=0;
				$x11=0;
			} elsif ("$x13" ==  "$x11" && "$x12" == 0 ) {
				$x13 = "$x13" + "$x11";
				$x12=0;
				$x11=0;
			} else {
				$x12 = "$x11";
				$x11=0;
			}
		}
	 	} elsif ("$x13" == "$x12") {
			$x13 = "$x13" + "$x12";
			$x12 = "$x11";
			$x11 = 0;
		} else {
			if ("$x12" == 0 ) {
			$x12 = "$x11";
			$x11=0;
			} elsif ("$x12" == "$x11") {
				$x12 ="$x12" + "$x11";
				$x11=0;
				}
			}
	}
	 if ("$x24" == 0 ) {  #вторая строка 
		$x24 = "$x23";
		if ("$x24" == 0) {
			$x24 = "$x22";
			if ("$x24" == 0) { 
				$x24 = "$x21";
				$x23 = 0;
				$x22 = 0;
				$x21 = 0;
			} elsif ("$x24" == "$x21") {
				$x24 ="$x24"+"$x12";
				$x23 = 0;
				$x22 = 0;
				$x21 = 0;
			} else {
				$x23 = "$x21";
				$x22 = 0;
				$x21 = 0;
			}
		} elsif ("$x24" == "$x22") {
			$x24 = "$x24"+"$x22";
			$x23 = "$x21";
			$x22 = 0;
			$x21 = 0;
		} elsif ("$x24" == "$x21" && "$x22" == 0 ) {
			$x24="$x24"+"$x21";
			$x23 = 0;
			$x22 = 0;
			$x21 = 0;
		} else {
			$x23="$x22";
			if ("$x23" == "$x21") {
				$x23 = "$x23"+"$x21";
				if ("$x24"=="$x23") {
					$x24 ="$x24"+"$x23";
					$x23 = 0;
					$x22 = 0;
					$x21 = 0;
				} else {
					$x22 = 0;
					$x21 = 0;
				}
			} else {
				$x22 = "$x21";
				$x21 = 0;
			}
		}
	} elsif ("$x24" == "$x23") {
		$x24 = "$x24"+"$x23";
		$x23 = "$x22";
		if ("$x23" ==  0) {
			$x23 = "$x21";
			$x22=0;
			$x21=0;
		} elsif ("$x23" == "$x21") {
		 $x23 = "$x23"+"$x21";
		 $x22=0;
		 $x21=0;
		 } else {
		 $x22 = "$x21";
		 $x21=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x23" == 0 ) {
	 		if ("$x24" == "$x22") {
	 			$x24 = "$x24"+"$x22";
	 			$x23 = "$x21";
	 			$x22=0;
				$x21=0;
	 		} else {
			$x23 = "$x22";
			if ("$x23" ==  0 ) {
				$x23 = "$x21";
				$x22=0;
				$x21=0;
			} elsif ("$x23" ==  "$x21" && "$x22" == 0 ) {
				$x23 = "$x23" + "$x21";
				$x22=0;
				$x21=0;
			} else {
				$x22 = "$x21";
				$x21=0;
			}
		}
	 	} elsif ("$x23" == "$x22") {
			$x23 = "$x23" + "$x22";
			$x22 = "$x21";
			$x21 = 0;
		} else {
			if ("$x22" == 0 ) {
			$x22 = "$x21";
			$x21=0;
			} elsif ("$x22" == "$x21") {
				$x22 ="$x22" + "$x21";
				$x21=0;
				}
			}
	
	 }
	if ("$x34" == 0 ) {  #третья  строка 
		$x34 = "$x33";
		if ("$x34" == 0) {
			$x34 = "$x32";
			if ("$x34" == 0) { 
				$x34 = "$x31";
				$x33 = 0;
				$x32 = 0;
				$x31 = 0;
			} elsif ("$x34" == "$x31") {
				$x34 ="$x34"+"$x31";
				$x33 = 0;
				$x32 = 0;
				$x31 = 0;
			} else { #начинать отсюда
				$x33 = "$x31";
				$x32 = 0;
				$x31 = 0;
			}
		} elsif ("$x34" == "$x32") {
			$x34 = "$x34"+"$x32";
			$x33 = "$x31";
			$x32 = 0;
			$x31 = 0;
		} elsif ("$x34" == "$x31" && "$x32" == 0 ) {
			$x34="$x34"+"$x31";
			$x33 = 0;
			$x32 = 0;
			$x31 = 0;
		} else {
			$x33="$x32";
			if ("$x33" == "$x31") {
				$x33 = "$x33"+"$x31";
				if ("$x34"=="$x33") {
					$x34 ="$x34"+"$x33";
					$x33 = 0;
					$x32 = 0;
					$x31 = 0;
				} else {
					$x32 = 0;
					$x31 = 0;
				}
			} else {
				$x32 = "$x31";
				$x31 = 0;
			}
		}
	} elsif ("$x34" == "$x33") {
		$x34 = "$x34"+"$x33";
		$x33 = "$x32";
		if ("$x33" ==  0) {
			$x33 = "$x31";
			$x32=0;
			$x31=0;
		} elsif ("$x33" == "$x31") {
		 $x33 = "$x33"+"$x31";
		 $x32=0;
		 $x31=0;
		 } else {
		 $x32 = "$x31";
		 $x31=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x33" == 0 ) {
	 		if ("$x34" == "$x32") {
	 			$x34 = "$x34"+"$x32";
	 			$x33 = "$x31";
	 			$x32=0;
				$x31=0;
	 		} else {
			$x33 = "$x32";
			if ("$x33" ==  0 ) {
				$x33 = "$x31";
				$x32=0;
				$x31=0;
			} elsif ("$x33" ==  "$x31" && "$x32" == 0 ) {
				$x33 = "$x33" + "$x31";
				$x32=0;
				$x31=0;
			} else {
				$x32 = "$x31";
				$x31=0;
			}
		}
	 	} elsif ("$x33" == "$x32") {
			$x33 = "$x33" + "$x32";
			$x32 = "$x31";
			$x31 = 0;
		} else {
			if ("$x32" == 0 ) {
			$x32 = "$x31";
			$x31=0;
			} elsif ("$x32" == "$x31") {
				$x32 ="$x32" + "$x31";
				$x31=0;
				}
			}
	}
	if ("$x44" == 0 ) {  #четвертая строка 
		$x44 = "$x43";
		if ("$x44" == 0) {
			$x44 = "$x42";
			if ("$x44" == 0) { 
				$x44 = "$x41";
				$x43 = 0;
				$x42 = 0;
				$x41 = 0;
			} elsif ("$x44" == "$x41") {
				$x44 ="$x44"+"$x41";
				$x43 = 0;
				$x42 = 0;
				$x41 = 0;
			} else { #начинать отсюда
				$x43 = "$x41";
				$x42 = 0;
				$x41 = 0;
			}
		} elsif ("$x44" == "$x42") {
			$x44 = "$x44"+"$x42";
			$x43 = "$x41";
			$x42 = 0;
			$x41 = 0;
		} elsif ("$x44" == "$x41" && "$x42" == 0 ) {
			$x44="$x44"+"$x41";
			$x43 = 0;
			$x42 = 0;
			$x41 = 0;
		} else {
			$x43="$x42";
			if ("$x43" == "$x41") {
				$x43 = "$x43"+"$x41";
				if ("$x44"=="$x43") {
					$x44 ="$x44"+"$x43";
					$x43 = 0;
					$x42 = 0;
					$x41 = 0;
				} else {
					$x42 = 0;
					$x41 = 0;
				}
			} else {
				$x42 = "$x41";
				$x41 = 0;
			}
		}
	} elsif ("$x44" == "$x43") {
		$x44 = "$x44"+"$x43";
		$x43 = "$x42";
		if ("$x43" ==  0) {
			$x43 = "$x41";
			$x42=0;
			$x41=0;
		} elsif ("$x43" == "$x41") {
		 $x43 = "$x43"+"$x41";
		 $x42=0;
		 $x41=0;
		 } else {
		 $x42 = "$x41";
		 $x41=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x43" == 0 ) {
	 		if ("$x44" == "$x42") {
	 			$x44 = "$x44"+"$x42";
	 			$x43 = "$x41";
	 			$x42=0;
				$x41=0;
	 		} else {
			$x43 = "$x42";
			if ("$x43" ==  0 ) {
				$x43 = "$x41";
				$x42=0;
				$x41=0;
			} elsif ("$x43" ==  "$x41" && "$x42" == 0 ) {
				$x43 = "$x43" + "$x41";
				$x42=0;
				$x41=0;
			} else {
				$x42 = "$x41";
				$x41=0;
			}
		}
	 	} elsif ("$x43" == "$x42") {
			$x43 = "$x43" + "$x42";
			$x42 = "$x41";
			$x41 = 0;
		} else {
			if ("$x42" == 0 ) {
			$x42 = "$x41";
			$x41=0;
			} elsif ("$x42" == "$x41") {
				$x42 ="$x42" + "$x41";
				$x41=0;
				}
			}
	}	
} elsif ("$MOV" eq "A") { #движение влево
	 if ("$x11" == 0 ) {  #первая строка 
		$x11 = "$x12";
		if ("$x11" == 0) {
			$x11 = "$x13";
			if ("$x11" == 0) { 
				$x11 = "$x14";
				$x13 = 0;
				$x12 = 0;
				$x14 = 0;
			} elsif ("$x11" == "$x14") {
				$x11 ="$x14"+"$x11";
				$x13 = 0;
				$x12 = 0;
				$x14 = 0;
			} else { 
				$x12 = "$x14";
				$x13 = 0;
				$x14 = 0;
			}
		} elsif ("$x11" == "$x13") {
			$x11 = "$x11"+"$x13";
			$x12 = "$x14";
			$x13 = 0;
			$x14 = 0;
		} elsif ("$x11" == "$x14" && "$x13" == 0 ) {
			$x11="$x14"+"$x11";
			$x13 = 0;
			$x12 = 0;
			$x14 = 0;
		} else {
			$x12="$x13";
			if ("$x12" == "$x14") {
				$x12 = "$x12"+"$x14";
				if ("$x11"=="$x12") {
					$x11 ="$x11"+"$x12";
					$x13 = 0;
					$x12 = 0;
					$x14 = 0;
				} else {
					$x13 = 0;
					$x14 = 0;
				}
			} else {
				$x13 = "$x14";
				$x14 = 0;
			}
		}
	} elsif ("$x11" == "$x12") {
		$x11 = "$x11"+"$x12";
		$x12 = "$x13";
		if ("$x12" ==  0) {
			$x12 = "$x14";
			$x13=0;
			$x14=0;
		} elsif ("$x12" == "$x14") {
		 $x12 = "$x12"+"$x14";
		 $x13=0;
		 $x14=0;
		 } else {
		 $x13 = "$x14";
		 $x14=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x12" == 0 ) {
	 		if ("$x11" == "$x13") {
	 			$x11 = "$x11"+"$x13";
	 			$x12 = "$x14";
	 			$x13=0;
				$x14=0;
	 		} else {
			$x12 = "$x13";
			if ("$x12" ==  0 ) {
				$x12 = "$x14";
				$x13=0;
				$x14=0;
			} elsif ("$x12" ==  "$x14" && "$x13" == 0 ) {
				$x12 = "$x12" + "$x14";
				$x13=0;
				$x14=0;
			} else {
				$x13 = "$x14";
				$x14=0;
			}
			}
	 	} elsif ("$x12" == "$x13") {
			$x12 = "$x13" + "$x12";
			$x13 = "$x14";
			$x14 = 0;
		} else {
			if ("$x13" == 0 ) {
			$x13 = "$x14";
			$x14=0;
			} elsif ("$x13" == "$x14") {
				$x13 ="$x13" + "$x14";
				$x14=0;
				}
			}
	 }
	 if ("$x21" == 0 ) {  #вторая строка 
		$x21 = "$x22";
		if ("$x21" == 0) {
			$x21 = "$x23";
			if ("$x21" == 0) { 
				$x21 = "$x24";
				$x23 = 0;
				$x22 = 0;
				$x24 = 0;
			} elsif ("$x21" == "$x24") {
				$x21 ="$x24"+"$x21";
				$x23 = 0;
				$x22 = 0;
				$x24 = 0;
			} else { 
				$x22 = "$x24";
				$x23 = 0;
				$x24 = 0;
			}
		} elsif ("$x21" == "$x23") {
			$x21 = "$x21"+"$x23";
			$x22 = "$x24";
			$x23 = 0;
			$x24 = 0;
		} elsif ("$x21" == "$x24" && "$x23" == 0 ) {
			$x21="$x24"+"$x21";
			$x23 = 0;
			$x22 = 0;
			$x24 = 0;
		} else {
			$x22="$x23";
			if ("$x22" == "$x24") {
				$x22 = "$x22"+"$x24";
				if ("$x21"=="$x22") {
					$x21 ="$x21"+"$x22";
					$x23 = 0;
					$x22 = 0;
					$x24 = 0;
				} else {
					$x23 = 0;
					$x24 = 0;
				}
			} else {
				$x23 = "$x24";
				$x24 = 0;
			}
		}
	} elsif ("$x21" == "$x22") {
		$x21 = "$x21"+"$x22";
		$x22 = "$x23";
		if ("$x22" ==  0) {
			$x22 = "$x24";
			$x23=0;
			$x24=0;
		} elsif ("$x22" == "$x24") {
		 $x22 = "$x22"+"$x24";
		 $x23=0;
		 $x24=0;
		 } else {
		 $x23 = "$x24";
		 $x24=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x22" == 0 ) {
	 		if ("$x21" == "$x23") {
	 			$x21 = "$x21"+"$x23";
	 			$x22 = "$x24";
	 			$x23=0;
				$x24=0;
	 		} else {
			$x22 = "$x23";
			if ("$x22" ==  0 ) {
				$x22 = "$x24";
				$x23=0;
				$x24=0;
			} elsif ("$x22" ==  "$x24" && "$x23" == 0 ) {
				$x22 = "$x22" + "$x24";
				$x23=0;
				$x24=0;
			} else {
				$x23 = "$x24";
				$x24=0;
			}
			}
	 	} elsif ("$x22" == "$x23") {
			$x22 = "$x23" + "$x22";
			$x23 = "$x24";
			$x24 = 0;
		} else {
			if ("$x23" == 0 ) {
			$x23 = "$x24";
			$x24=0;
			} elsif ("$x23" == "$x24") {
				$x23 ="$x23" + "$x24";
				$x24=0;
				}
			}
	 }
	 if ("$x31" == 0 ) {  #третья строка 
		$x31 = "$x32";
		if ("$x31" == 0) {
			$x31 = "$x33";
			if ("$x31" == 0) { 
				$x31 = "$x34";
				$x33 = 0;
				$x32 = 0;
				$x34 = 0;
			} elsif ("$x31" == "$x34") {
				$x31 ="$x34"+"$x31";
				$x33 = 0;
				$x32 = 0;
				$x34 = 0;
			} else { 
				$x32 = "$x34";
				$x33 = 0;
				$x34 = 0;
			}
		} elsif ("$x31" == "$x33") {
			$x31 = "$x31"+"$x33";
			$x32 = "$x34";
			$x33 = 0;
			$x34 = 0;
		} elsif ("$x31" == "$x34" && "$x33" == 0 ) {
			$x31="$x34"+"$x31";
			$x33 = 0;
			$x32 = 0;
			$x34 = 0;
		} else {
			$x32="$x33";
			if ("$x32" == "$x34") {
				$x32 = "$x32"+"$x34";
				if ("$x31"=="$x32") {
					$x31 ="$x31"+"$x32";
					$x33 = 0;
					$x32 = 0;
					$x34 = 0;
				} else {
					$x33 = 0;
					$x34 = 0;
				}
			} else {
				$x33 = "$x34";
				$x34 = 0;
			}
		}
	} elsif ("$x31" == "$x32") {
		$x31 = "$x31"+"$x32";
		$x32 = "$x33";
		if ("$x32" ==  0) {
			$x32 = "$x34";
			$x33=0;
			$x34=0;
		} elsif ("$x32" == "$x34") {
		 $x32 = "$x32"+"$x34";
		 $x33=0;
		 $x34=0;
		 } else {
		 $x33 = "$x34";
		 $x34=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x32" == 0 ) {
	 		if ("$x31" == "$x33") {
	 			$x31 = "$x31"+"$x33";
	 			$x32 = "$x34";
	 			$x33=0;
				$x34=0;
	 		} else {
			$x32 = "$x33";
			if ("$x32" ==  0 ) {
				$x32 = "$x34";
				$x33=0;
				$x34=0;
			} elsif ("$x32" ==  "$x34" && "$x33" == 0 ) {
				$x32 = "$x32" + "$x34";
				$x33=0;
				$x34=0;
			} else {
				$x33 = "$x34";
				$x34=0;
			}
			}
	 	} elsif ("$x32" == "$x33") {
			$x32 = "$x33" + "$x32";
			$x33 = "$x34";
			$x34 = 0;
		} else {
			if ("$x33" == 0 ) {
			$x33 = "$x34";
			$x34=0;
			} elsif ("$x33" == "$x34") {
				$x33 ="$x33" + "$x34";
				$x34=0;
				}
			}
	 }
	 if ("$x41" == 0 ) {  #четвертая строка 
		$x41 = "$x42";
		if ("$x41" == 0) {
			$x41 = "$x43";
			if ("$x41" == 0) { 
				$x41 = "$x44";
				$x43 = 0;
				$x42 = 0;
				$x44 = 0;
			} elsif ("$x41" == "$x44") {
				$x41 ="$x44"+"$x41";
				$x43 = 0;
				$x42 = 0;
				$x44 = 0;
			} else { 
				$x42 = "$x44";
				$x43 = 0;
				$x44 = 0;
			}
		} elsif ("$x41" == "$x43") {
			$x41 = "$x41"+"$x43";
			$x42 = "$x44";
			$x43 = 0;
			$x44 = 0;
		} elsif ("$x41" == "$x44" && "$x43" == 0 ) {
			$x41="$x44"+"$x41";
			$x43 = 0;
			$x42 = 0;
			$x44 = 0;
		} else {
			$x42="$x43";
			if ("$x42" == "$x44") {
				$x42 = "$x42"+"$x44";
				if ("$x41"=="$x42") {
					$x41 ="$x41"+"$x42";
					$x43 = 0;
					$x42 = 0;
					$x44 = 0;
				} else {
					$x43 = 0;
					$x44 = 0;
				}
			} else {
				$x43 = "$x44";
				$x44 = 0;
			}
		}
	} elsif ("$x41" == "$x42") {
		$x41 = "$x41"+"$x42";
		$x42 = "$x43";
		if ("$x42" ==  0) {
			$x42 = "$x44";
			$x43=0;
			$x44=0;
		} elsif ("$x42" == "$x44") {
		 $x42 = "$x42"+"$x44";
		 $x43=0;
		 $x44=0;
		 } else {
		 $x43 = "$x44";
		 $x44=0;
		 }	 
	 } else { #первое число не 0 и первые два не равны
	 	if ("$x42" == 0 ) {
	 		if ("$x41" == "$x43") {
	 			$x41 = "$x41"+"$x43";
	 			$x42 = "$x44";
	 			$x43=0;
				$x44=0;
	 		} else {
			$x42 = "$x43";
			if ("$x42" ==  0 ) {
				$x42 = "$x44";
				$x43=0;
				$x44=0;
			} elsif ("$x42" ==  "$x44" && "$x43" == 0 ) {
				$x42 = "$x42" + "$x44";
				$x43=0;
				$x44=0;
			} else {
				$x43 = "$x44";
				$x44=0;
			}
			}
	 	} elsif ("$x42" == "$x43") {
			$x42 = "$x43" + "$x42";
			$x43 = "$x44";
			$x44 = 0;
		} else {
			if ("$x43" == 0 ) {
			$x43 = "$x44";
			$x44=0;
			} elsif ("$x43" == "$x44") {
				$x43 ="$x43" + "$x44";
				$x44=0;
				}
			}
	 }	
}


#поиск пустых клеток и добавление случайного числа 2 или 4
my @arrnew;
my @arrx = ('x11', 'x12', 'x13', 'x14', 'x21', 'x22', 'x23', 'x24', 'x31', 'x32', 'x33', 'x34', 'x', 'x42', 'x43', 'x44');
my @arry = ("$x11", "$x12", "$x13", "$x14", "$x21", "$x22", "$x23", "$x24", "$x31", "$x32", "$x33", "$x34", "$x41", "$x42", "$x43", "$x44");
foreach my $i (0 .. $#arry) {
	if ("$arry[$i]" == 0 ) {
		push (@arrnew, $arrx[$i]);
	}
}
my $randx1 = int rand($#arrnew);#выбираем случайный элемент массива
my $randx2 = int rand($#arrnew);#выбираем случайный элемент массива
my $first =$arrnew[$randx1];
my $second =$arrnew[$randx2];

my $dop1 = (int rand(2) + 1)*2;#случайное 2 или 4
my $dop2 = (int rand(2) + 1)*2;#случайное 2 или 4
last if $second eq ""; #выход из цикла в случае не возможности добавит новое число
if ($first eq "x11") { #клетка для первого случайного числа
			$x11=$dop1;
		} elsif ($first eq "x12") {
			$x12=$dop1;
		} elsif ($first eq "x13") {
			$x13=$dop1;
		} elsif ($first eq "x14") {
			$x14=$dop1;
		} elsif ($first eq "x21") {
			$x21=$dop1;
		} elsif ($first eq "x22") {
			$x22=$dop1;
		} elsif ($first eq "x23") {
			$x23=$dop1;
		} elsif ($first eq "x24") {
			$x24=$dop1;
		} elsif ($first eq "x31") {
			$x31=$dop1;
		} elsif ($first eq "x32") {
			$x32=$dop1;
		} elsif ($first eq "x33") {
			$x33=$dop1;
		} elsif ($first eq "x34") {
			$x34=$dop1;
		} elsif ($first eq "x41") {
			$x41=$dop1;
		} elsif ($first eq "x42") {
			$x42=$dop1;
		} elsif ($first eq "x43") {
			$x43=$dop1;
		} elsif ($first eq "x44") {
			$x44=$dop1;
		# } elsif ($first eq "") {
			# print "YOU LOSE!";
			# last M1;
		}
if ($second eq "x11") { #клетка для второго случайного числа
			$x11=$dop2;
		} elsif ($second eq "x12") {
			$x12=$dop2;
		} elsif ($second eq "x13") {
			$x13=$dop2;
		} elsif ($second eq "x14") {
			$x14=$dop2;
		} elsif ($second eq "x21") {
			$x21=$dop2;
		} elsif ($second eq "x22") {
			$x22=$dop2;
		} elsif ($second eq "x23") {
			$x23=$dop2;
		} elsif ($second eq "x24") {
			$x24=$dop2;
		} elsif ($second eq "x31") {
			$x31=$dop2;
		} elsif ($second eq "x32") {
			$x32=$dop2;
		} elsif ($second eq "x33") {
			$x33=$dop2;
		} elsif ($second eq "x34") {
			$x34=$dop2;
		} elsif ($second eq "x41") {
			$x41=$dop2;
		} elsif ($second eq "x42") {
			$x42=$dop2;
		} elsif ($second eq "x43") {
			$x43=$dop2;
		} elsif ($second eq "x44") {
			$x44=$dop2;
		}		

#отрисовка поля
system(clear);
print "$x11   $x12   $x13   $x14\n$x21   $x22   $x23   $x24\n$x31   $x32   $x33   $x34\n$x41   $x42   $x43   $x44\n"; 
}
print "YOU LOSE!\n"; #выход из цикла в случае не возможности добавит новое число
sleep 1;
exit;
